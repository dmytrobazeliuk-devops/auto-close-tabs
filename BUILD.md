# Інструкції зі збірки розширення

## Тестування та відлагодження

### 1. Завантаження розпакованого розширення
1. Відкрийте Google Chrome
2. Перейдіть до `chrome://extensions/`
3. Увімкніть "Режим розробника" (перемикач у верхньому правому куті)
4. Натисніть "Завантажити розпаковане розширення"
5. Виберіть папку `auto-close-tabs`

### 2. Відлагодження
- Натисніть "Детальніше" під розширенням
- Натисніть "Переглянути фонову сторінку" для відкриття консолі
- Перевірте логи в консолі для діагностики

## Створення архіву

### ZIP архів (автоматично)
```powershell
.\build-zip.ps1
```
Створює файл `auto-close-tabs.zip`

### CRX файл (через Chrome UI)
1. Відкрийте `chrome://extensions/`
2. Увімкніть "Режим розробника"
3. Натисніть "Пакувати розширення"
4. У полі "Розташування розширення" вкажіть шлях до папки `auto-close-tabs`
5. У полі "Ключ" вкажіть шлях до `keys\private_key.pem`
6. Натисніть "Пакувати розширення"

### CRX файл (через командний рядок)
```powershell
.\build-crx.ps1
```

## Багаторівнева перевірка таймерів

Розширення має 7 рівнів перевірки для збереження таймерів:

1. **Рівень 1**: Ініціалізація при завантаженні service worker
2. **Рівень 2**: Верифікація та відновлення (`verifyAndRepairTimers`)
3. **Рівень 3**: Синхронізація URL-based tracking (`syncUrlBasedTracking`)
4. **Рівень 4**: Перевірка при запиті статистики
5. **Рівень 5**: Перевірка в `getTabStats`
6. **Рівень 6**: Перевірка перед закриттям вкладок
7. **Рівень 7**: Перевірка в `checkAndCloseInactiveTabs`

## Файли для збірки

- `manifest.json` - манифест розширення
- `background.js` - основний скрипт з багаторівневою перевіркою
- `popup.html` / `popup.js` - інтерфейс popup
- `stats.html` / `stats.js` - сторінка статистики
- `icons/*.png` - іконки розширення

## Примітки

- Приватний ключ (`keys/private_key.pem`) НЕ повинен бути включений в архів
- Для тестування використовуйте розпаковане розширення
- Для публікації в Chrome Web Store використовуйте ZIP архів



